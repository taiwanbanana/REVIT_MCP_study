---
name: floor-area-review
description: 執行建築容積檢討流程。當用戶提到「容積」「樓地板面積」「法規檢討」「送審」時啟用。
tags: [容積, 法規, 送審, 面積]
---

# 容積檢討流程

## 前置條件
- Revit 模型已開啟
- MCP 服務已啟動
- 房間邊界已正確繪製

## 執行步驟

### 步驟 1：取得樓層資料

```
使用工具：get_all_levels
目的：取得所有樓層清單
預期結果：樓層名稱、樓層高程
```

### 步驟 2：取得房間資料

```
使用工具：get_rooms_by_level
參數：level = 每個樓層名稱
目的：取得每層的房間清單
預期結果：房間名稱、面積、中心點座標
```

### 步驟 3：分類房間

根據房間名稱或用途分類：

| 類型 | 計入容積 | 範例 |
|-----|:-------:|------|
| 主要空間 | ✅ 100% | 住宅、辦公、商業 |
| 陽台 | ⚠️ 50% | 露台、陽台 |
| 附屬空間 | ❌ 0% | 機房、樓梯間、電梯間 |

### 步驟 4：計算面積

公式：
- 總樓地板面積 = Σ(計入容積的房間面積)
- 容積率 = 總樓地板面積 / 基地面積 × 100%

### 步驟 5：法規比對

參考 `domain/references/building-code-tw.md` 中的容積率規定。

常見標準：
- 住宅區：容積率 ≤ 300%
- 商業區：容積率 ≤ 600%
- 工業區：容積率 ≤ 200%

### 步驟 6：產生報告

輸出格式：

```
┌────────────────────────────────────┐
│          容積檢討報告               │
├────────────────────────────────────┤
│  一樓：XXX㎡                        │
│  二樓：XXX㎡                        │
│  三樓：XXX㎡                        │
│  ────────────────                  │
│  總計：XXX㎡                        │
│  基地面積：XXX㎡                    │
│  容積率：XXX%                       │
│  法規上限：XXX%                     │
│  結果：✅ 符合 / ❌ 超過             │
└────────────────────────────────────┘
```

## 範例對話

**用戶**：幫我做容積檢討

**AI**：好的，我會執行容積檢討流程...

（依上述步驟執行並產生報告）

## 注意事項

1. **陽台面積**：依法規可能只計入 50%，需確認當地規定
2. **地下室**：通常不計入容積，但需檢查法規
3. **機械層**：高度超過一定標準可能需計入
4. **樓梯間**：各層重複計算或只算一次，依法規而定
