---
name: fire-rating-check
description: 執行建築防火等級檢查流程。當用戶提到「防火」「耐燃」「消防」「防火時效」時啟用。
tags: [防火, 消防, 法規, 材質]
---

# 防火等級檢查流程

## 前置條件
- Revit 模型已開啟
- MCP 服務已啟動
- 牆體材質已正確設定

## 執行步驟

### 步驟 1：取得樓層清單

```
使用工具：get_all_levels
目的：確認需要檢查的樓層範圍
```

### 步驟 2：查詢外牆元素

```
使用工具：query_elements
參數：
  - category: Wall
  - filters: 根據牆體位置或類型篩選
目的：取得所有外牆清單
```

### 步驟 3：檢查牆體防火時效

```
使用工具：get_element_info
參數：elementId = 每面牆的 ID
目的：取得牆體屬性，包括：
  - 材質
  - 厚度
  - 防火時效（如有設定）
```

### 步驟 4：比對法規標準

根據建築用途判斷防火時效要求：

| 建築類型 | 外牆防火時效 | 內牆防火時效 |
|---------|:-----------:|:-----------:|
| 住宅（6層以下） | 1 小時 | 30 分鐘 |
| 住宅（7層以上） | 2 小時 | 1 小時 |
| 辦公大樓 | 2 小時 | 1 小時 |
| 商場 | 2 小時 | 1 小時 |

參考 `domain/references/building-code-tw.md` 取得詳細標準。

### 步驟 5：標示不合格元素

```
使用工具：override_element_color
參數：
  - elementId: 不合格牆的 ID
  - color: 紅色（R=255, G=0, B=0）
目的：視覺化顯示需要修改的牆
```

### 步驟 6：產生報告

輸出格式：

```
┌────────────────────────────────────────────┐
│            防火等級檢查報告                 │
├────────────────────────────────────────────┤
│  檢查日期：YYYY-MM-DD                       │
│  總牆數：XX 面                              │
│  合格：XX 面                                │
│  不合格：XX 面                              │
├────────────────────────────────────────────┤
│  不合格清單：                               │
│  ├─ 牆 ID 12345：1F 外牆，時效 30 分鐘<60   │
│  ├─ 牆 ID 12346：2F 隔間，時效 0 分鐘<30    │
│  └─ ...                                    │
├────────────────────────────────────────────┤
│  建議：                                     │
│  1. 調整牆體材質或厚度                       │
│  2. 增加防火塗料                            │
└────────────────────────────────────────────┘
```

## 範例對話

**用戶**：幫我檢查這個案子的防火等級

**AI**：好的，我會執行防火等級檢查...

（依上述步驟執行並產生報告）

## 注意事項

1. **分間牆**：需注意是否為防火分間牆
2. **管道間**：穿越防火區劃需設防火填塞
3. **門窗**：防火牆上的開口需使用防火門窗
4. **結構柱**：需有足夠的防火被覆

## 相關工具

建議搭配使用以下腳本：
- `MCP-Server/scripts/fire_rating_full.js` - 完整防火上色流程
- `MCP-Server/scripts/clear_walls.js` - 清除顏色
